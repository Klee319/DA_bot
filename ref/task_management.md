# タスク管理書

最終更新: 2025-06-24

## 実装済み機能

### ✅ Phase 1: 基本機能
- [x] アイテム検索機能（装備・素材・モブ）
- [x] 部分一致検索
- [x] 表記ゆれ対応（ひらがな・カタカナ・漢字）
- [x] 検索結果の詳細表示（Embed形式）
- [x] ページネーション対応
- [x] 画像表示機能

### ✅ Phase 2: 拡張機能
- [x] ワイルドカード検索（前方・後方・中間一致対応）
- [x] レベル/ランク除去機能
- [x] 関連アイテム検索
  - [x] 必要素材から装備検索
  - [x] ドロップ元モブ検索
  - [x] 入手先NPC検索
- [x] プルダウンメニューによるアイテム選択
- [x] インタラクティブボタン（入手元詳細・利用先詳細）

### ✅ Phase 3: 管理機能
- [x] 管理者ロール/ユーザー管理
- [x] チャンネル制限機能
- [x] 自動バックアップ機能
- [x] データベース更新機能

### ✅ 追加実装機能
- [x] NPC交換データ対応
- [x] 複数入手元カテゴリ対応
- [x] ワイルドカードアイテムの説明検索
- [x] 個数表示の統一（:からxへ）

## 未実装機能

### ⬜ お気に入り機能
- [ ] user_favoritesテーブルの実装
- [ ] お気に入り追加/削除コマンド
- [ ] お気に入り一覧表示

### ⬜ 検索履歴・統計機能
- [ ] search_historyテーブルの実装
- [ ] search_statsテーブルの実装
- [ ] 検索ランキング表示
- [ ] 個人検索履歴表示

### ⬜ 高度な検索機能
- [ ] 複数条件検索
- [ ] レベル範囲指定検索
- [ ] エリア指定検索

## バグ修正履歴

### 2025-06-24
- [x] NoneTypeエラーの修正（embed_manager.py）
- [x] データベースカラムエラーの修正（dropped_items → drops）
- [x] gathering_locationsテーブル参照エラーの修正
- [x] ワイルドカード検索の不具合修正

### 2025-06-23
- [x] mob経験値・goldのカンマ区切り表示対応
- [x] ワイルドカードアイテムのボタン非表示対応
- [x] モブドロップのワイルドカードアイテム表示

## 今後の課題

1. **パフォーマンス最適化**
   - 大量データ検索時の速度改善
   - インデックスの最適化

2. **ユーザビリティ向上**
   - エラーメッセージの改善
   - ヘルプコマンドの充実

3. **保守性向上**
   - テストコードの追加
   - ドキュメントの整備
   - 定数の外部化（constants.py）

## 開発メモ

- ワイルドカード文字は `*`, `?`, `＊`, `？` の4種類をサポート
- レベル/ランク表記は自動的に除去して検索
- config.jsonはGitから除外（セキュリティ対策）